# ğŸš€ Eport å®ˆæŠ¤è¿›ç¨‹è§„åˆ™å¼•æ“

<div align="center">

  ![Version](https://img.shields.io/badge/version-5.9.0-blue.svg?style=for-the-badge)
  ![Java](https://img.shields.io/badge/Java-21-orange.svg?style=for-the-badge&logo=java)
  ![Spring Boot](https://img.shields.io/badge/Spring_Boot-3.x-green.svg?style=for-the-badge&logo=spring-boot)
  ![Spring Cloud](https://img.shields.io/badge/Spring_Cloud-2023.x-brightgreen.svg?style=for-the-badge&logo=spring)
  ![License](https://img.shields.io/badge/license-MIT-purple.svg?style=for-the-badge)

</div>

<p align="center">
  <img src="https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Objects/Gear.png" width="100" />
</p>

## ğŸŒ è¯­è¨€ / Language

[English](README.md) | **ä¸­æ–‡**

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

Eport å®ˆæŠ¤è¿›ç¨‹è§„åˆ™å¼•æ“æ˜¯ä¸€ä¸ªä¸ºæ¸¯å£ç®¡ç†è¿è¥è€Œæ„å»ºçš„ä¼ä¸šçº§è§„åˆ™å¼•æ“ç³»ç»Ÿã€‚å®ƒæä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„æ¡†æ¶ï¼ŒåŒæ—¶æ”¯æŒ **Drools** å’Œ **LiteFlow** è§„åˆ™å¼•æ“ï¼Œåœ¨åˆ†å¸ƒå¼å¾®æœåŠ¡ç¯å¢ƒä¸­å®ç°çµæ´»çš„ä¸šåŠ¡è§„åˆ™ç®¡ç†å’Œæ‰§è¡Œã€‚

è¯¥ç³»ç»Ÿæ—¨åœ¨å¤„ç†æ¸¯å£å’Œç‰©æµç®¡ç†ç³»ç»Ÿä¸­å¸¸è§çš„å¤æ‚ä¸šåŠ¡é€»è¾‘éªŒè¯ã€æ•°æ®å¤„ç†å·¥ä½œæµå’Œè‡ªåŠ¨åŒ–å†³ç­–è¿‡ç¨‹ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ”„ **åŒè§„åˆ™å¼•æ“æ”¯æŒ**ï¼šåŸç”Ÿæ”¯æŒ Drools å’Œ LiteFlow è§„åˆ™å¼•æ“
- ğŸ—ï¸ **å¾®æœåŠ¡æ¶æ„**ï¼šåŸºäº Spring Cloud å’Œ Nacos æœåŠ¡å‘ç°æ„å»º
- ğŸ”Œ **çµæ´»è§„åˆ™åŠ è½½**ï¼šæ”¯æŒæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿå’ŒåŸºäº Redis çš„è§„åˆ™å­˜å‚¨
- ğŸ“Š **ä¼ä¸šçº§é›†æˆ**ï¼šä¸ç°æœ‰ Eport ç”Ÿæ€ç³»ç»Ÿæ— ç¼é›†æˆ
- ğŸ›¡ï¸ **å®‰å…¨è®¤è¯**ï¼šå†…ç½® OAuth2 å’Œ JWT å®‰å…¨æœºåˆ¶
- ğŸ“ˆ **æ€§èƒ½ç›‘æ§**ï¼šå…¨é¢çš„æ—¥å¿—è®°å½•å’Œç›‘æ§èƒ½åŠ›
- ğŸ³ **å®¹å™¨åŒ–å°±ç»ª**ï¼šDocker æ”¯æŒï¼Œä¾¿äºéƒ¨ç½²
- ğŸ”§ **çƒ­é‡è½½**ï¼šåŠ¨æ€è§„åˆ™é‡æ–°åŠ è½½ï¼Œæ— éœ€é‡å¯æœåŠ¡

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶
- **Java 21**ï¼šæœ€æ–° LTS ç‰ˆæœ¬ï¼Œæ”¯æŒç°ä»£è¯­è¨€ç‰¹æ€§
- **Spring Boot 3.x**ï¼šä¼ä¸šçº§åº”ç”¨æ¡†æ¶
- **Spring Cloud 2023.x**ï¼šå¾®æœåŠ¡åŸºç¡€è®¾æ–½
- **Nacos**ï¼šæœåŠ¡å‘ç°å’Œé…ç½®ç®¡ç†

### è§„åˆ™å¼•æ“
- **Drools 10.1.0**ï¼šä¸šåŠ¡è§„åˆ™ç®¡ç†ç³»ç»Ÿ
- **LiteFlow 2.15.0**ï¼šè½»é‡çº§è§„åˆ™ç¼–æ’å¼•æ“

### æ•°æ®å­˜å‚¨
- **MyBatis Plus**ï¼šå¢å¼ºå‹ ORM æ¡†æ¶
- **MySQL/MSSQL/Oracle/PostgreSQL**ï¼šå¤šæ•°æ®åº“æ”¯æŒ
- **Druid**ï¼šé«˜æ€§èƒ½è¿æ¥æ± 
- **Redis**ï¼šç¼“å­˜å’Œè§„åˆ™å­˜å‚¨

### åŸºç¡€è®¾æ–½
- **Docker**ï¼šå®¹å™¨åŒ–
- **Undertow**ï¼šé«˜æ€§èƒ½ Web æœåŠ¡å™¨
- **Maven**ï¼šæ„å»ºå’Œä¾èµ–ç®¡ç†

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **JDK 21+**ï¼šç¼–è¯‘å’Œè¿è¡Œç¯å¢ƒå¿…éœ€
- **Maven 3.6+**ï¼šé¡¹ç›®æ„å»ºç®¡ç†
- **Docker**ï¼šå¯é€‰ï¼Œç”¨äºå®¹å™¨åŒ–éƒ¨ç½²
- **Nacos æœåŠ¡å™¨**ï¼šç”¨äºæœåŠ¡æ³¨å†Œå’Œé…ç½®ç®¡ç†

### å®‰è£…æ­¥éª¤

1. **å…‹éš†ä»“åº“**

```bash
git clone https://github.com/your-org/eport-rule-engine.git
cd eport-rule-engine
```

2. **æ„å»ºé¡¹ç›®**

```bash
# æ„å»ºæ‰€æœ‰æ¨¡å—
mvn clean package

# æ„å»ºç‰¹å®šé…ç½®
mvn clean package -P cloud
```

3. **é…ç½®æœåŠ¡**

æ›´æ–° starter æ¨¡å—ä¸­çš„ `application.yml`ï¼š

```yaml
spring:
  cloud:
    nacos:
      discovery:
        server-addr: localhost:8848
      config:
        server-addr: localhost:8848
```

4. **è¿è¡Œåº”ç”¨**

```bash
# ä» starter æ¨¡å—è¿è¡Œ
cd eport-rule-engine-starter
java -jar target/eport-rule-engine-starter-5.9.0.jar
```

### Docker éƒ¨ç½²

```bash
# æ„å»º Docker é•œåƒ
cd eport-rule-engine-starter
docker build -t eport-rule-engine:latest .

# è¿è¡Œå®¹å™¨
docker run -d \
  --name eport-rule-engine \
  -p 19992:19992 \
  -e NACOS_HOST=your-nacos-server \
  eport-rule-engine:latest
```

## ğŸ“š é¡¹ç›®ç»“æ„

```
eport-rule-engine/
â”œâ”€â”€ eport-rule-engine-core/          # æ ¸å¿ƒè§„åˆ™å¼•æ“å®ç°
â”‚   â”œâ”€â”€ src/main/java/
â”‚   â”‚   â””â”€â”€ com/eport/daemon/rule/
â”‚   â”‚       â”œâ”€â”€ common/              # é€šç”¨å¸¸é‡å’Œæšä¸¾
â”‚   â”‚       â”œâ”€â”€ engine/              # è§„åˆ™å¼•æ“æŠ½è±¡
â”‚   â”‚       â”‚   â”œâ”€â”€ impl/            # Drools å’Œ LiteFlow å®ç°
â”‚   â”‚       â”‚   â”œâ”€â”€ AbstractRuleEngine.java
â”‚   â”‚       â”‚   â”œâ”€â”€ RuleEngine.java
â”‚   â”‚       â”‚   â”œâ”€â”€ RuleEngineBuilder.java
â”‚   â”‚       â”‚   â””â”€â”€ RuleEngineFactory.java
â”‚   â”‚       â”œâ”€â”€ pojo/                # æ•°æ®æ¨¡å‹
â”‚   â”‚       â”œâ”€â”€ storage/             # è§„åˆ™å­˜å‚¨å’ŒåŠ è½½
â”‚   â”‚       â”‚   â””â”€â”€ impl/            # æœ¬åœ°å’Œ Redis å®ç°
â”‚   â”‚       â””â”€â”€ utils/               # å·¥å…·ç±»
â”‚   â””â”€â”€ pom.xml
â”œâ”€â”€ eport-rule-engine-starter/       # Spring Boot åº”ç”¨å¯åŠ¨å™¨
â”‚   â”œâ”€â”€ src/main/java/
â”‚   â”‚   â””â”€â”€ com/eport/daemon/rule/
â”‚   â”‚       â”œâ”€â”€ EportDaemonRuleEngineApplication.java
â”‚   â”‚       â””â”€â”€ liteflow/            # LiteFlow ç»„ä»¶
â”‚   â”œâ”€â”€ src/test/                    # æµ‹è¯•ç”¨ä¾‹å’Œç¤ºä¾‹
â”‚   â”‚   â”œâ”€â”€ java/                    # å•å…ƒæµ‹è¯•
â”‚   â”‚   â””â”€â”€ resources/rules/         # ç¤ºä¾‹è§„åˆ™
â”‚   â”‚       â”œâ”€â”€ drools/              # Drools è§„åˆ™æ–‡ä»¶ (.drl)
â”‚   â”‚       â””â”€â”€ liteflow/            # LiteFlow è§„åˆ™æ–‡ä»¶ (.xml)
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ pom.xml
â”œâ”€â”€ pom.xml                          # çˆ¶ POM
â”œâ”€â”€ LICENSE
â”œâ”€â”€ README.md
â””â”€â”€ README_CN.md
```

## ğŸ”§ é…ç½®è¯´æ˜

### è§„åˆ™å¼•æ“é…ç½®

ç³»ç»Ÿé€šè¿‡ `EngineType` æšä¸¾æ”¯æŒå¤šç§è§„åˆ™å¼•æ“ï¼š

- `DROOLS`ï¼šä¼ ç»Ÿè§„åˆ™å¼•æ“ï¼Œé€‚ç”¨äºå¤æ‚ä¸šåŠ¡é€»è¾‘
- `LITEFLOW`ï¼šè½»é‡çº§ç¼–æ’å¼•æ“ï¼Œé€‚ç”¨äºå·¥ä½œæµç®¡ç†

### è§„åˆ™å­˜å‚¨é€‰é¡¹

åœ¨åº”ç”¨ä¸­é…ç½®è§„åˆ™åŠ è½½ç­–ç•¥ï¼š

- **æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ**ï¼šä»ç±»è·¯å¾„æˆ–æ–‡ä»¶ç³»ç»ŸåŠ è½½è§„åˆ™
- **Redis**ï¼šé›†ä¸­å¼è§„åˆ™å­˜å‚¨ï¼Œæ”¯æŒçƒ­é‡è½½

### æ•°æ®åº“æ”¯æŒ

ç³»ç»Ÿæ”¯æŒå¤šç§æ•°æ®åº“ç±»å‹ï¼š
- MySQL
- Microsoft SQL Server
- Oracle Database
- PostgreSQL

## ğŸ“ è§„åˆ™ç¤ºä¾‹

### Drools è§„åˆ™ (.drl)

```drl
package rules.engine.set.ruleset1
import com.alibaba.fastjson.JSONObject

rule "vehicle_weight_check"
when
    $fact:JSONObject(getInteger("weight") != null && getInteger("weight") >= 60)
then
    $fact.put("overweight", 1);
    System.out.println("è½¦è¾†è¶…é‡");
end

rule "cargo_check"
    salience 10
    no-loop true
when
    $fact:JSONObject(getString("hasGood") != null && getString("hasGood").equals("0"))
then
    $fact.put("not_good", 1);
    $fact.put("passd", "0");
    System.out.println("è¯¥è½¦æ— è´§");
    update($fact);
end
```

### LiteFlow è§„åˆ™ (.xml)

```xml
<?xml version="1.0" encoding="UTF-8"?>
<flow>
    <chain name="validation_chain">
        THEN(weight_check, cargo_check, WHEN(special_check, standard_check));
    </chain>
    
    <chain name="weight_check">
        THEN(weight_validation);
    </chain>
    
    <chain name="cargo_check">
        THEN(cargo_validation);
    </chain>
</flow>
```

## ğŸ§ª æµ‹è¯•

è¿è¡Œæµ‹è¯•å¥—ä»¶éªŒè¯åŠŸèƒ½ï¼š

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
mvn test

# è¿è¡Œç‰¹å®šæµ‹è¯•ç±»
mvn test -Dtest=SimpleLiteFlowTest
mvn test -Dtest=SimpleServiceTest
```

## ğŸš€ API æ¥å£

æœåŠ¡åœ¨ `/admin` ä¸Šä¸‹æ–‡è·¯å¾„ä¸‹æš´éœ² RESTful APIï¼š

- **åŸºç¡€ URL**ï¼š`http://localhost:19992/admin`
- **API æ–‡æ¡£**ï¼šé€šè¿‡ `/admin/swagger-ui.html` è®¿é—® Swagger UI

## ğŸ“ˆ ç›‘æ§ä¸å¯è§‚æµ‹æ€§

### å¥åº·æ£€æŸ¥
- Spring Boot Actuator ç«¯ç‚¹
- è§„åˆ™å¼•æ“è‡ªå®šä¹‰å¥åº·æŒ‡ç¤ºå™¨

### æ—¥å¿—è®°å½•
- ä½¿ç”¨ Logback çš„ç»“æ„åŒ–æ—¥å¿—
- æŒ‰ç»„ä»¶é…ç½®æ—¥å¿—çº§åˆ«
- ä¸é›†ä¸­å¼æ—¥å¿—ç³»ç»Ÿé›†æˆ

### æŒ‡æ ‡ç›‘æ§
- åº”ç”¨æ€§èƒ½æŒ‡æ ‡
- è§„åˆ™æ‰§è¡Œç»Ÿè®¡
- ç³»ç»Ÿèµ„æºç›‘æ§

## ğŸ”’ å®‰å…¨ç‰¹æ€§

- **OAuth2 è®¤è¯**ï¼šå®‰å…¨çš„ API è®¿é—®
- **JWT ä»¤ç‰Œæ”¯æŒ**ï¼šæ— çŠ¶æ€è®¤è¯
- **åŸºäºè§’è‰²çš„æˆæƒ**ï¼šç»†ç²’åº¦è®¿é—®æ§åˆ¶
- **API åŠ å¯†**ï¼šè¯·æ±‚/å“åº”åŠ å¯†æ”¯æŒ

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿ä¸º Eport è§„åˆ™å¼•æ“è´¡çŒ®ä»£ç ï¼è¯·éµå¾ªä»¥ä¸‹æŒ‡å¯¼åŸåˆ™ï¼š

1. **Fork ä»“åº“**
2. **åˆ›å»ºåŠŸèƒ½åˆ†æ”¯**ï¼š`git checkout -b feature/amazing-feature`
3. **æäº¤æ›´æ”¹**ï¼š`git commit -m 'Add amazing feature'`
4. **æ¨é€åˆ°åˆ†æ”¯**ï¼š`git push origin feature/amazing-feature`
5. **åˆ›å»º Pull Request**

### å¼€å‘æŒ‡å—

- éµå¾ª Java ç¼–ç æ ‡å‡†å’Œæœ€ä½³å®è·µ
- ä¸ºæ–°åŠŸèƒ½ç¼–å†™å…¨é¢çš„å•å…ƒæµ‹è¯•
- æ›´æ–° API å˜æ›´çš„ç›¸å…³æ–‡æ¡£
- å°½å¯èƒ½ç¡®ä¿å‘åå…¼å®¹æ€§

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦æƒ…è¯·å‚é˜… [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ“ æ”¯æŒä¸è”ç³»

**é¡¹ç›®ç»´æŠ¤è€…**ï¼š[@HeyAlaia](https://github.com/HeyAlaia)
- **é‚®ç®±**ï¼šalaia@eport.com
- **åšå®¢**ï¼š[alaiablog.pages.dev](https://alaiablog.pages.dev/)

**ä¼ä¸šæ”¯æŒ**ï¼šå¦‚éœ€å•†ä¸šæ”¯æŒå’Œå®šåˆ¶æœåŠ¡ï¼Œè¯·è”ç³»æˆ‘ä»¬çš„ä¼ä¸šå›¢é˜Ÿã€‚

## ğŸ”„ ç‰ˆæœ¬å†å²

- **v5.9.0**ï¼šå½“å‰ç‰ˆæœ¬
  - æ”¯æŒ Java 21
  - å‡çº§åˆ° Spring Boot 3.x
  - é›†æˆ Drools 10.1.0 å’Œ LiteFlow 2.15.0
  - å¢å¼ºå®‰å…¨æ€§å’Œç›‘æ§åŠŸèƒ½

## ğŸ—ºï¸ è·¯çº¿å›¾

- [ ] æ”¯æŒæ›´å¤šè§„åˆ™å¼•æ“ï¼ˆå¦‚ Easy Rulesï¼‰
- [ ] å›¾å½¢åŒ–è§„åˆ™ç¼–è¾‘å™¨
- [ ] è§„åˆ™ç‰ˆæœ¬ç®¡ç†å’Œå›æ»š
- [ ] æ›´ä¸°å¯Œçš„ç›‘æ§æŒ‡æ ‡å’Œå‘Šè­¦
- [ ] è§„åˆ™æ€§èƒ½åˆ†æå·¥å…·

---

<div align="center">
  <sub>ç”¨ â¤ï¸ ä¸º Eport ç”Ÿæ€ç³»ç»Ÿæ„å»º</sub>
</div>